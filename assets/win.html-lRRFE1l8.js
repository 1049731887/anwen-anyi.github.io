import{_ as r}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as i,o as p,c,d as a,a as s,b as n,e as t}from"./app-PiE1HHy2.js";const d="/img/build/build02.jpeg",g="/img/build/build01.jpeg",u="/img/build/build03.gif",b="/img/build/build04.gif",h="/img/build/build05.gif",m="/img/build/build06.png",v="/img/build/build07.png",_="/img/build/build08.png",f="/img/build/build09.png",k="/img/build/build10.gif",x="/img/build/build11.gif",w="/img/build/build12.gif",q={},y=t('<p>有的小伙伴想着自己编译一下 Alist<br> 不管是出于自己想折腾还是自己想改改源码哩.大家都可以编译~ (๑•́₃ •)</p><h2 id="windows版本编译教程" tabindex="-1"><a class="header-anchor" href="#windows版本编译教程"><span>Windows版本编译教程</span></a></h2><h2 id="_1-编译前准备" tabindex="-1"><a class="header-anchor" href="#_1-编译前准备"><span>1.编译前准备</span></a></h2><h3 id="_1-1-编译视频版教程" tabindex="-1"><a class="header-anchor" href="#_1-1-编译视频版教程"><span>1.1 编译视频版教程</span></a></h3>',4),B=s("h3",{id:"_1-2-编译之前的前提条件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-2-编译之前的前提条件"},[s("span",null,"1.2 编译之前的前提条件")])],-1),z={href:"https://github.com/alist-org/alist/blob/main/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"},N=s("p",null,"编译AList Go竟然需要 1.20+了...呜呜呜",-1),C=s("p",null,"我没记错前几个月才升级了1.18+...升级真快(´◔‸◔')”",-1),G=s("p",null,[s("strong",null,"编译之前我们需要先准备安装好以下软件:")],-1),O={href:"https://git-scm.com/download/win",target:"_blank",rel:"noopener noreferrer"},$=s("strong",null,"git",-1),A={href:"https://golang.org/doc/install",target:"_blank",rel:"noopener noreferrer"},V=s("strong",null,"golang 1.20+",-1),T={href:"https://gcc.gnu.org/",target:"_blank",rel:"noopener noreferrer"},j=s("strong",null,"gcc",-1),I={href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"},X=s("strong",null,"nodejs",-1),R={href:"https://www.npmjs.com/package/pnpm",target:"_blank",rel:"noopener noreferrer"},E=s("strong",null,"pnpm",-1),D=t(`<p>以上安装过程我就不赘述了...<strong>（安装问题都解决不了的话编译也够呛）</strong></p><p>以上软件安装好后我们先把 <strong>Go的代理改为国内</strong> 的..</p><p>安装好Golang后并且也将 &quot;<strong>环境变量&quot;</strong> 配置好，然后win+R 输入CMD打开DDos黑窗口(这里是用的Windows)</p><p>根据自己的配置输入：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct      // Windows
<span class="token builtin class-name">export</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct         // macOS 或 Linux
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>将代理改为国内,不然编译时会出错,前人血泪史之一... <strong>（踩坑一号）</strong></p><p><strong>然后我们改好后看看生效没有：</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>CMD黑窗口输入go env查看（需要配置好环境变量哦先）

安装好默认的是：
<span class="token builtin class-name">set</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span><span class="token string">&quot;https://proxy.golang.org,direct&quot;</span>
修改代理后是
<span class="token builtin class-name">set</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>反正不管他默认的是啥，改就完事了！！！</strong></p><p><strong>以上就是编译前需要的准备 安装好5个软件，改一下代理 ..不难吧(ฅ&#39;ω&#39;ฅ)</strong></p><h3 id="_1-3-编译前端前准备" tabindex="-1"><a class="header-anchor" href="#_1-3-编译前端前准备"><span>1.3 编译前端前准备</span></a></h3>`,11),L=s("strong",null,"编译前我们看看文档怎么编译",-1),W={href:"https://github.com/alist-org/alist/blob/main/CONTRIBUTING.md",target:"_blank",rel:"noopener noreferrer"},P=t('<figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>我们需要编译前肯定是要先克隆一下<strong>前端</strong>和<strong>后端</strong>的代码（clone）</p><p>执行图上的两行命令在我们安装的 <strong>git</strong> 终端里面</p><figure><img src="'+g+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>你克隆到任意地方都行建议放到一个文件夹里面去,这样我们修改的时候也方便</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>alist.git是后端，alist-web.git是前端
无代理
<span class="token function">git</span> clone https://github.com/alist-org/alist.git
<span class="token function">git</span> clone --recurse-submodules https://github.com/alist-org/alist-web.git

代理 - （大白提供-可能服务中断了）
<span class="token function">git</span> clone https://hub.cooluc.com/alist-org/alist.git
<span class="token function">git</span> clone --recurse-submodules https://hub.cooluc.com/alist-org/alist-web.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前后端 拉取/克隆(clone)好了</p><p>但是我们拉取/克隆(clone)下来的前端里面只有一个 默认的英文语言文件</p><p>我们还需要去下载一个带中文的语言文件</p><h3 id="_1-4-手动下载语言包地址" tabindex="-1"><a class="header-anchor" href="#_1-4-手动下载语言包地址"><span>1.4 手动下载语言包地址</span></a></h3>`,10),U={href:"https://crowdin.com/project/alist/zh-CN",target:"_blank",rel:"noopener noreferrer"},Y=s("p",null,"这里是手动下载，还有命令自动下的哪个我没研究明白...害,卡了好几天了这个语言文件..",-1),F=s("figure",null,[s("img",{src:u,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),M=s("figure",null,[s("img",{src:b,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),S=s("h3",{id:"_1-5-直接下载语言包直链",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-5-直接下载语言包直链"},[s("span",null,"1.5 直接下载语言包直链：")])],-1),H={href:"https://crowdin.com/backend/download/project/alist/zh-CN.zip",target:"_blank",rel:"noopener noreferrer"},J=t(`<p>上面的语言文件放进去后我们去终端里面输入命令：</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code>node ./scripts/i18n.mjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行完毕语言里面会出现一个 <strong>entry.ts</strong> 的文件，这样我们就可以用了</p><figure><img src="`+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以上软件安装并且配置好环境变量了，Go 代理设置好了，语言包文件下载好了 ，我们编译前准备工作就可以了</p><h2 id="_2-编译前端" tabindex="-1"><a class="header-anchor" href="#_2-编译前端"><span>2.编译前端</span></a></h2><p>首先CD进入 <strong><code>alist-web</code></strong> 前端文件夹内，</p><p>然后输入 <strong>pnpm install</strong> 将 <strong>node_modules</strong> （包管理工具下载安装的包的文件夹），下载下来，</p><p>别问问什么不用 <strong>npm</strong> 要用 <strong>pnpm</strong> ...问就是用 <strong>pnpm</strong> 就完了...这个也是血的教训.. <strong>%&gt;_&lt;% <sup>（踩坑2号）</sup></strong></p><p>中间自己改源码的过程就不演示了，自己想怎么改就怎怎么改</p><p>改完了 执行如下命令将前端文件进行编译： <strong><code>pnpm build</code></strong> <strong><code>npm run build</code></strong> 这两个二选一都行</p>',11),K=t('<figure><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-1-编译前端期间可能会遇到的问题" tabindex="-1"><a class="header-anchor" href="#_2-1-编译前端期间可能会遇到的问题"><span>2.1 编译前端期间可能会遇到的问题</span></a></h3><h4 id="输入pnpm-install会报错-三号坑" tabindex="-1"><a class="header-anchor" href="#输入pnpm-install会报错-三号坑"><span>输入<code>pnpm install</code>会报错 <sup>(三号坑)</sup></span></a></h4><h4 id="如果你输入-pnpm-install-出现如下图中的错误" tabindex="-1"><a class="header-anchor" href="#如果你输入-pnpm-install-出现如下图中的错误"><span>如果你输入 pnpm install 出现如下图中的错误</span></a></h4><figure><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="上述报错中的解决方案" tabindex="-1"><a class="header-anchor" href="#上述报错中的解决方案"><span>上述报错中的解决方案</span></a></h4><figure><img src="'+_+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>如果没出现上述的错误能正常编译 忽略即可！</p><h4 id="输入-pnpm-install-会报错-四号坑" tabindex="-1"><a class="header-anchor" href="#输入-pnpm-install-会报错-四号坑"><span>输入 pnpm install 会报错 (四号坑)</span></a></h4><h4 id="如果你输入-pnpm-install-出现如下图中的错误-1" tabindex="-1"><a class="header-anchor" href="#如果你输入-pnpm-install-出现如下图中的错误-1"><span>如果你输入 pnpm install 出现如下图中的错误</span></a></h4><figure><img src="'+f+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>上述问题的问题所在以及解决方案</strong></p><p>问题所在</p><ul><li><p>看看你前端的 <strong><code> solid-router</code></strong> 这个文件夹里面是不是空的..估计是空的</p></li><li><p>下载前端的时候没有带 <code>--recurse-submodules</code> 参数导致附属的文件没有下载下来</p></li></ul><p>解决方案</p><ul><li>下载前端带上 <code>--recurse-submodules</code> 参数去下载</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>无代理
<span class="token function">git</span> clone --recurse-submodules https://github.com/alist-org/alist-web.git

代理 - （大白提供）
<span class="token function">git</span> clone --recurse-submodules https://hub.cooluc.com/alist-org/alist-web.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-编译后端" tabindex="-1"><a class="header-anchor" href="#_3-编译后端"><span>3.编译后端</span></a></h2><ol><li>在前端编译好后我们就会看到一个 <strong><code>&quot;dist&quot;</code></strong> 的文件夹</li><li>我们移动一下把 <strong><code>&quot;dist&quot;</code></strong> 目录移动到的后端的 <strong><code>&quot;public&quot;</code></strong> 目录里面去即可</li><li>虽然里面已经有了一个 <strong>&quot;dist&quot;</strong> 文件夹，不用管直接覆盖</li></ol><figure><img src="`+k+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>将编译好的前端移文件动到后端里面去，准备编译</p><p><strong>&quot;dist&quot;</strong> 目录移动到 <strong><code>&quot;public&quot;</code></strong> 去之后，我们就可以编译了（如果有改代码的需求自己改完再编译）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token assign-left variable">appName</span><span class="token operator">=</span><span class="token string">&quot;alist&quot;</span>
<span class="token assign-left variable">builtAt</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&#39;%F %T %z&#39;</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">goVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go version <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/go version //&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">gitAuthor</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> show <span class="token parameter variable">-s</span> <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">&#39;format:%aN &lt;%ae&gt;&#39;</span> HEAD<span class="token variable">)</span></span>
<span class="token assign-left variable">gitCommit</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> log <span class="token parameter variable">--pretty</span><span class="token operator">=</span>format:<span class="token string">&quot;%h&quot;</span> <span class="token parameter variable">-1</span><span class="token variable">)</span></span>
<span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> describe <span class="token parameter variable">--long</span> <span class="token parameter variable">--tags</span> <span class="token parameter variable">--dirty</span> <span class="token parameter variable">--always</span><span class="token variable">)</span></span>
<span class="token assign-left variable">webVersion</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">wget</span> -qO- <span class="token parameter variable">-t1</span> <span class="token parameter variable">-T2</span> <span class="token string">&quot;https://api.github.com/repos/alist-org/alist-web/releases/latest&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;tag_name&quot;</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&quot;:&quot;</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/\\&quot;//g;s/,//g;s/ //g&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">ldflags</span><span class="token operator">=</span><span class="token string">&quot;\\
-w -s \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.BuiltAt=<span class="token variable">$builtAt</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GoVersion=<span class="token variable">$goVersion</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitAuthor=<span class="token variable">$gitAuthor</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.GitCommit=<span class="token variable">$gitCommit</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.Version=<span class="token variable">$version</span>&#39; \\
-X &#39;github.com/alist-org/alist/v3/internal/conf.WebVersion=<span class="token variable">$webVersion</span>&#39; \\
&quot;</span>
go build <span class="token parameter variable">-ldflags</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$ldflags</span>&quot;</span> <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有人看到这么一大坨这怎么执行...我们可以创建一个 &quot; <strong>.sh</strong>&quot; 后缀的文件，然后把这一坨复制粘贴进去即可</p><p>‪如果怕自己创建的 <strong>.sh</strong> 后缀 文件不能用我们可以复制粘贴一个已经有的然后把里面的内容替换了即可</p><h3 id="_3-1-演示创建-sh" tabindex="-1"><a class="header-anchor" href="#_3-1-演示创建-sh"><span>3.1 <a href="#_3-1-%E6%BC%94%E7%A4%BA%E5%88%9B%E5%BB%BA-sh">演示创建.sh</a></span></a></h3><figure><img src="`+x+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',27),Q=s("strong",null,"可以直接双击执行",-1),Z={href:"http://run.sh",target:"_blank",rel:"noopener noreferrer"},ss=s("strong",null,"（可能大概需要1-2分钟）",-1),ns=s("p",null,"我这里的Windows自然是.exe后缀的，如果是Linux，那肯定出现的是二进制文件",-1),as=s("figure",null,[s("img",{src:w,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),es=s("p",null,[n("‪好了，以上教程就是本次编译的教程啦... 想折腾的自己折腾吧...有想试试的 可以试试看..."),s("strong",null,"(‾◡◝)")],-1);function ts(is,os){const l=i("BiliBili"),e=i("ExternalLinkIcon"),o=i("Badge");return p(),c("div",null,[y,a(l,{bvid:"BV1ye4y1m7e1"}),B,s("p",null,[n("大家可以看一下这里需要啥："),s("a",z,[n("https://github.com/alist-org/alist/blob/main/CONTRIBUTING.md"),a(e)])]),N,C,G,s("ol",null,[s("li",null,[s("a",O,[$,a(e)])]),s("li",null,[s("a",A,[V,a(e)])]),s("li",null,[s("a",T,[j,a(e)])]),s("li",null,[s("a",I,[X,a(e)])]),s("li",null,[s("a",R,[E,a(e)])])]),D,s("p",null,[L,n("："),s("a",W,[n("https://github.com/alist-org/alist/blob/main/CONTRIBUTING.md"),a(e)])]),P,s("p",null,[s("strong",null,[s("a",U,[n("https://crowdin.com/project/alist/zh-CN"),a(e)])])]),Y,F,M,S,s("p",null,[s("strong",null,[s("a",H,[n("https://crowdin.com/backend/download/project/alist/zh-CN.zip"),a(e)])])]),J,s("p",null,[n("编译好后，会看到一个叫 "),a(o,{text:"dist",type:"info"}),n(" 的文件夹，这个就是我们编译好的内容一会我们移动到后端里面去")]),K,s("p",null,[n("我们创建好了，"),Q,n("，或者在命令行运行 这个我们刚刚修改的 "),s("strong",null,[s("a",Z,[n("run.sh"),a(e)])]),n(" 文件也行")]),s("p",null,[n("运行好了 "),ss,n(" 目录里面会出现一个"),a(o,{text:"alist.exe",type:"info"}),n(" 的文件 这就是编译好了")]),ns,as,es])}const ps=r(q,[["render",ts],["__file","win.html.vue"]]);export{ps as default};
